{"paragraphs":[{"text":"%spark.dep\nz.addRepo(\"sonatype\").url(\"https://oss.sonatype.org/content/repositories/snapshots/\").snapshot\nz.load(\"se.uu.it:mare:0.4.0-SNAPSHOT\")","user":"anonymous","dateUpdated":"2020-01-16T13:34:31+0000","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"res0: org.apache.zeppelin.dep.Dependency = org.apache.zeppelin.dep.Dependency@579ebb29\n"}]},"apps":[],"jobName":"paragraph_1579171371135_1296697634","id":"20200107-161005_176031855","dateCreated":"2020-01-16T10:42:51+0000","dateStarted":"2020-01-16T13:34:32+0000","dateFinished":"2020-01-16T13:34:40+0000","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:13710"},{"text":"// Check Spark version\nsc.version","user":"anonymous","dateUpdated":"2020-01-16T13:34:33+0000","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"res5: String = 2.3.2\n"}]},"apps":[],"jobName":"paragraph_1579171371144_-1580251584","id":"20191115-125438_1759064115","dateCreated":"2020-01-16T10:42:51+0000","dateStarted":"2020-01-16T13:34:36+0000","dateFinished":"2020-01-16T13:34:48+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:13711"},{"text":"val nodes = 2","user":"anonymous","dateUpdated":"2020-01-16T10:43:21+0000","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"nodes: Int = 2\n"}]},"apps":[],"jobName":"paragraph_1579171371148_-1506741077","id":"20200107-160415_450202758","dateCreated":"2020-01-16T10:42:51+0000","dateStarted":"2020-01-16T10:43:21+0000","dateFinished":"2020-01-16T10:43:22+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:13712"},{"text":"// Ingest SureChEMBL\nsc.hadoopConfiguration.set(\"textinputformat.record.delimiter\", \"\\n$$$$\\n\")\nsc.textFile(\"swift://mare.cpouta/surechembl\").sample(false, nodes.toDouble/12).repartition(nodes).map(_+\"\\n$$$$\").saveAsTextFile(\"hdfs://spark-cluster-2-master-000/surechembl\")","user":"anonymous","dateUpdated":"2020-01-16T10:45:26+0000","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[]},"apps":[],"jobName":"paragraph_1579171371149_1576694253","id":"20191115-125457_1430056504","dateCreated":"2020-01-16T10:42:51+0000","dateStarted":"2020-01-16T10:45:27+0000","dateFinished":"2020-01-16T10:45:57+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:13713"},{"text":"%sh\nhadoop fs -rm -r hdfs://spark-cluster-2-master-000/surechembl/_SUCCESS","user":"anonymous","dateUpdated":"2020-01-16T10:46:05+0000","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"2020-01-16 10:46:08,388 INFO  [main] fs.TrashPolicyDefault (TrashPolicyDefault.java:initialize(92)) - Namenode trash configuration: Deletion interval = 0 minutes, Emptier interval = 0 minutes.\nDeleted hdfs://spark-cluster-2-master-000/surechembl/_SUCCESS\n"}]},"apps":[],"jobName":"paragraph_1579171371151_-1705456090","id":"20200107-162552_326134663","dateCreated":"2020-01-16T10:42:51+0000","dateStarted":"2020-01-16T10:46:06+0000","dateFinished":"2020-01-16T10:46:08+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:13714"},{"text":"// Full pipeline, (restart interpreter, containers in nodes)\nimport se.uu.it.mare._\nsc.hadoopConfiguration.set(\"textinputformat.record.delimiter\", \"\\n$$$$\\n\")\nval libraryRDD = sc.textFile(\"hdfs://spark-cluster-2-master-000/surechembl\")\nval topPosesRDD = new MaRe(libraryRDD).map(\n  inputMountPoint = TextFile(\"/in.sdf\", \"\\n$$$$\\n\"),\n  outputMountPoint = TextFile(\"/out.sdf\", \"\\n$$$$\\n\"),\n  imageName = \"mcapuccini/oe:latest\",\n  command = \"\"\"\n    fred -receptor /var/openeye/hiv1_protease.oeb \\\n        -hitlist_size 0 \\\n        -conftest none \\\n        -dbase /in.sdf \\\n        -docked_molecule_file /out.sdf\n  \"\"\"\n).reduce(\n  inputMountPoint = TextFile(\"/in.sdf\", \"\\n$$$$\\n\"),\n  outputMountPoint = TextFile(\"/out.sdf\", \"\\n$$$$\\n\"),\n  imageName = \"mcapuccini/sdsorter:latest\",\n  command = \"\"\"\n    sdsorter -reversesort=\"FRED Chemgauss4 score\" \\\n        -keep-tag=\"FRED Chemgauss4 score\" \\\n        -nbest=30 \\\n        /in.sdf /out.sdf\n  \"\"\"\n).rdd.map(_+\"\\n$$$$\").saveAsTextFile(\"hdfs://spark-cluster-2-master-000/out\")\n// Took 2 hrs 15 min 47 sec (tmpfs)\n// Took 2 hrs 16 min 46 sec (disk)","user":"anonymous","dateUpdated":"2020-01-21T13:37:21+0000","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"import se.uu.it.mare._\nlibraryRDD: org.apache.spark.rdd.RDD[String] = hdfs://spark-cluster-2-master-000/surechembl MapPartitionsRDD[1] at textFile at <console>:28\ntopPosesRDD: Unit = ()\n"}]},"apps":[],"jobName":"paragraph_1579171371152_-1155071272","id":"20191115-133016_17016884","dateCreated":"2020-01-16T10:42:51+0000","dateStarted":"2020-01-16T13:35:01+0000","dateFinished":"2020-01-16T15:50:48+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:13715"},{"text":"%sh\nhadoop fs -rm -r hdfs://spark-cluster-2-master-000/out","user":"anonymous","dateUpdated":"2020-01-16T13:32:24+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"sh","editOnDblClick":false,"completionKey":"TAB","completionSupport":false},"editorMode":"ace/mode/sh"},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"2020-01-16 13:32:26,835 INFO  [main] fs.TrashPolicyDefault (TrashPolicyDefault.java:initialize(92)) - Namenode trash configuration: Deletion interval = 0 minutes, Emptier interval = 0 minutes.\nDeleted hdfs://spark-cluster-2-master-000/out\n"}]},"apps":[],"jobName":"paragraph_1579171731108_-1458891835","id":"20200116-104851_80692416","dateCreated":"2020-01-16T10:48:51+0000","dateStarted":"2020-01-16T13:32:25+0000","dateFinished":"2020-01-16T13:32:27+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:13716"},{"text":"%sh\n","user":"anonymous","dateUpdated":"2020-01-16T13:32:24+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{}},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1579181544197_378618072","id":"20200116-133224_147133378","dateCreated":"2020-01-16T13:32:24+0000","status":"READY","progressUpdateIntervalMs":500,"$$hashKey":"object:13717"}],"name":"vs_2_nodes","id":"2EXFKQAYR","noteParams":{},"noteForms":{},"angularObjects":{},"config":{"isZeppelinNotebookCronEnable":false,"looknfeel":"default","personalizedMode":"false"},"info":{}}